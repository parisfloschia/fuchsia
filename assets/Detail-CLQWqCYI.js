import{r as c,e as y,u as N,i as b,j as t,m as h,C as f,L as g,k,l as j,n as v,A as w}from"./index-CACRq_29.js";import{L as C}from"./LazyImage-BKUemFDp.js";function S({onClose:n,item:e,type:l}){const[s,o]=c.useState(1);y(a=>a.cart);const[x,i]=c.useState(!1),r=N(),m=b(),p=async()=>{i(!0),await r(k({...e,quantity:s})),await r(j({...e,quantity:s,orderPlaced:!0})),n(),i(!1),m("/checkout")},d=async()=>{i(!0),await r(j({...e,quantity:s})),i(!1),n()};return t.jsx(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed bg-black/60 inset-0 flex items-center z-10 justify-center",onClick:n,children:t.jsxs(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:a=>a.stopPropagation(),className:"bg-white rounded-lg w-9/12 p-5 flex flex-col items-center gap-2",children:[t.jsx("p",{className:"text-xs opacity-50 uppercase",children:l==="checkout"?"Checkout":"Add to cart"}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-xs opacity-70 mt-4 flex items-center gap-1",children:[t.jsx(f,{}),"10 items/Stock is the max quantity available."]}),t.jsxs("p",{className:"text-xs opacity-70 flex items-center gap-1",children:[t.jsx(f,{className:"invisible"}),"Click outside to close/discard."]})]}),t.jsx("p",{children:"Quantity"}),t.jsxs("div",{className:"flex items-center gap-4 justify-center",children:[t.jsx("span",{onClick:s===1?null:()=>o(a=>a-1),className:"text-2xl ",children:"<"}),t.jsx("p",{className:"btn text-center ",children:s}),t.jsx("span",{onClick:s===e.stock||s===10?null:()=>o(a=>a+1),className:"text-2xl ",children:">"})]}),t.jsxs("div",{className:"text-xs uppercase flex items-center gap-5",children:[t.jsxs("p",{children:["Stock: ",e.stock]}),t.jsxs("p",{children:["Total: $",(e.price*s).toFixed(2)]})]}),t.jsx("div",{className:"flex justify-center w-full",children:t.jsx("button",{onClick:l==="addtocart"?d:p,className:"btn  bg-gradient-to-r from-indigo-200 to-violet-500 text-white font-bold text-white font-bold mb-4 overflow-hidden",children:x?t.jsx(g,{size:"4px",color:"white"}):l==="checkout"?"Checkout":"Add to cart"})})]})})}function q(){const{id:n}=v(),[e,l]=c.useState({}),[s,o]=c.useState(!1),[x,i]=c.useState(!1),[r,m]=c.useState(""),p=d=>{m(d.target.name),i(!0),console.log(d.target.name)};return c.useEffect(()=>{(async()=>{o(!0);try{const u=await(await fetch(`https://dummyjson.com/products/${n}`)).json();console.log(u),l(u),o(!1)}catch(a){alert(a)}})()},[n]),t.jsxs(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"z-1",children:[t.jsx(w,{children:x&&t.jsx(S,{type:r,item:e,open:x,onClose:()=>i(!1)})}),s?t.jsx(g,{}):Object.keys(e).length>0&&t.jsxs(h.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:" w-full flex flex-col items-center",children:[t.jsx("div",{className:"w-11/12 h-80 rounded-lg bg-white ",children:t.jsx(C,{src:e==null?void 0:e.thumbnail})}),t.jsxs("div",{className:" my-2 flex flex-col items-start gap-6 w-11/12",children:[t.jsxs("div",{children:[t.jsx("p",{className:" font-serif italic w-full text-xl",children:e.title}),t.jsx("p",{className:"text-xs uppercase text-indigo-500/40 font-bold",children:e.brand||"No brand"})]}),t.jsx("p",{children:e.description}),t.jsxs("div",{className:"flex gap-3 items-center",children:[t.jsxs("p",{className:"text-xl italic",children:["$",e.price]}),t.jsxs("p",{className:"text-xs uppercase z-0 opacity-80",children:["Stock:",e.stock]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{name:"addtocart",onClick:p,className:"bg-gradient-to-r from-indigo-200 to-violet-500 btn text-gray-700 text-white font-bold",children:"Add To Cart"}),t.jsx("button",{name:"checkout",className:"btn bg-gradient-to-r from-indigo-200 to-violet-500 text-white font-bold",onClick:p,children:"Checkout"})]})]})]})]})}export{q as default};
