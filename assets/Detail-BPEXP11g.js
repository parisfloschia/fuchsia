import{r as c,e as g,u as b,i as N,j as e,C as p,L as j,k,l as f,m as v}from"./index-AJDRx7vI.js";function y({onClose:l,item:t,type:i}){const[s,n]=c.useState(1);g(a=>a.cart);const[x,o]=c.useState(!1),r=b(),u=N(),h=async()=>{o(!0),await r(k({...t,quantity:s})),await r(f({...t,quantity:s,orderPlaced:!0})),o(!1),l(),u("/checkout")},d=async()=>{await r(f({...t,quantity:s})),l()};return e.jsx("div",{className:`fixed bg-black/60 inset-0 flex items-center z-10 justify-center ${open?"visible":" hidden"}`,onClick:l,children:e.jsxs("div",{onClick:a=>a.stopPropagation(),className:"bg-white rounded-lg w-9/12 p-5 flex flex-col items-center gap-2",children:[e.jsx("p",{className:"text-xs opacity-50 uppercase",children:i==="checkout"?"Checkout":"Add to cart"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs opacity-70 mt-4 flex items-center gap-1",children:[e.jsx(p,{}),"10 items/Stock is the max quantity available."]}),e.jsxs("p",{className:"text-xs opacity-70 flex items-center gap-1",children:[e.jsx(p,{className:"invisible"}),"Click outside to close/discard."]})]}),e.jsx("p",{children:"Quantity"}),e.jsxs("div",{className:"flex items-center gap-4 justify-center",children:[e.jsx("span",{onClick:s===1?null:()=>n(a=>a-1),className:"text-2xl ",children:"<"}),e.jsx("p",{className:"btn text-center ",children:s}),e.jsx("span",{onClick:s===t.stock||s===10?null:()=>n(a=>a+1),className:"text-2xl ",children:">"})]}),e.jsxs("div",{className:"text-xs uppercase flex items-center gap-5",children:[e.jsxs("p",{children:["Stock: ",t.stock]}),e.jsxs("p",{children:["Total: $",(t.price*s).toFixed(2)]})]}),e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("button",{onClick:i==="addtocart"?d:h,className:"btn  bg-gradient-to-r from-indigo-200 to-violet-500 text-white font-bold text-white font-bold mb-4 overflow-hidden flex items-center",children:x?e.jsx(j,{size:"4px",color:"white"}):i==="checkout"?"Checkout":"Add to cart"})})]})})}function C(){const{id:l}=v(),[t,i]=c.useState({}),[s,n]=c.useState(!1),[x,o]=c.useState(!1),[r,u]=c.useState(""),h=d=>{u(d.target.name),o(!0),console.log(d.target.name)};return c.useEffect(()=>{(async()=>{n(!0);try{const m=await(await fetch(`https://dummyjson.com/products/${l}`)).json();console.log(m),i(m),n(!1)}catch(a){alert(a)}})()},[l]),e.jsxs("div",{className:"z-1",children:[x&&e.jsx(y,{type:r,item:t,open:x,onClose:()=>o(!1)}),s?e.jsx(j,{}):Object.keys(t).length>0&&e.jsxs("div",{className:" w-full flex flex-col items-center",children:[e.jsx("div",{className:"w-11/12 h-80 bg-white shadow-lg",children:e.jsx("img",{className:"w-full h-full rounded-xl object-contain",src:t==null?void 0:t.thumbnail})}),e.jsxs("div",{className:" my-2 flex flex-col items-start gap-6 w-11/12",children:[e.jsxs("div",{children:[e.jsx("p",{className:" font-[times] w-full text-xl",children:t.title}),e.jsx("p",{className:"text-xs uppercase text-indigo-500/40 font-bold",children:t.brand||"No brand"})]}),e.jsx("p",{children:t.description}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs("p",{className:"text-xl italic",children:["$",t.price]}),e.jsxs("p",{className:"text-xs uppercase z-0 opacity-80",children:["Stock:",t.stock]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{name:"addtocart",onClick:h,className:"bg-gradient-to-r from-indigo-200 to-violet-500 btn text-gray-700 text-white font-bold",children:"Add To Cart"}),e.jsx("button",{name:"checkout",className:"btn bg-gradient-to-r from-indigo-200 to-violet-500 text-white font-bold",onClick:h,children:"Checkout"})]})]})]})]})}export{C as default};
