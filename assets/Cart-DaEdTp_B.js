import{r as e,u as j,i as y,j as s,L as g,m as i,N as d,o as N,k as v,p as b}from"./index-DfQp_kwH.js";import{L as w}from"./LazyImage-kg_bFK_4.js";function L(){var o,r;const[t,u]=e.useState([]),[x,n]=e.useState(!1),c=j(),p=y();async function l(){n(!0);try{const{data:a}=await N.from("cart").select("*").eq("orderPlaced",!1);a&&(u(a),n(!1))}catch(a){alert(a)}}e.useEffect(()=>{l()},[]);const f=async a=>{await c(v(a)),p("/checkout")},h=async a=>{await c(b({type:"uuid",value:a.uuid})),l()};return x?s.jsx(g,{}):t.length===0?s.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"flex flex-col items-center gap-2",children:[s.jsx("p",{className:"opacity-50",children:"No products were added to your cart"}),s.jsx(d,{to:"/",className:"btn bg-gradient-to-r from-indigo-200 to-violet-500 text-white font-bold",children:"Go shopping"})]}):s.jsx("div",{className:"w-full flex justify-center",children:s.jsx("div",{className:"w-full flex flex-col items-center",children:(r=(o=t==null?void 0:t.slice())==null?void 0:o.reverse())==null?void 0:r.map(a=>s.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"p-5 rounded-lg shadow-lg w-full flex flex-col items-start gap-2",children:[s.jsx("div",{className:"h-60 w-full",children:s.jsx(w,{src:a==null?void 0:a.thumbnail})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-serif text-xl italic",children:a==null?void 0:a.title}),s.jsx("p",{className:"text-xs uppercase text-indigo-500/50 font-bold",children:a.brand||"no brand"}),s.jsxs("p",{className:"text-xs uppercase opacity-50",children:["Quantity: ",a==null?void 0:a.quantity]}),s.jsxs("p",{className:"text-xs uppercase opacity-50",children:["Total: $",((a==null?void 0:a.price)*(a==null?void 0:a.quantity)).toFixed(2)]})]}),s.jsxs("div",{className:"w-full flex justify-center items-center gap-2",children:[s.jsx("button",{onClick:()=>h(a),className:"btn text-red-400 truncate",children:"Remove"}),s.jsx(d,{to:`/detail/${a==null?void 0:a.id}`,className:"btn ",children:"Details"}),s.jsx("button",{onClick:()=>f(a),className:"btn bg-gradient-to-r from-indigo-200 to-violet-500 font-bold text-white",children:"Checkout"})]})]},a==null?void 0:a.uuid))})})}export{L as default};
