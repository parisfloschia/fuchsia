import{u,r as s,d as f,j as e,L as m,m as c,N as h,o as n,p as y}from"./index-D9NJtTfW.js";function j(){const l=u(),[a,o]=s.useState([]),[d,i]=s.useState(!1);f(t=>t.cart);async function r(){i(!0);try{const{data:t}=await n.from("cart").select("*").eq("orderPlaced",!0);t&&(o(t),i(!1))}catch(t){alert(t)}}s.useEffect(()=>{r()},[]);const p=async()=>{await n.from("cart").delete().eq("orderPlaced",!0),r()},x=async t=>{await l(y({type:"uuid",value:t})),r()};return d?e.jsx(m,{}):a.length===0?e.jsxs(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"flex flex-col w-11/12 items-center gap-2",children:[e.jsx("p",{className:"opacity-50",children:"No records of transaction."}),e.jsx(h,{to:"/",className:"btn bg-gradient-to-r from-indigo-200 to-violet-500 text-white font-bold",children:"Go shopping"})]}):e.jsxs(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"flex flex-col items-center gap-1 w-11/12",children:[e.jsxs("div",{className:"grid grid-cols-12 grid-rows-1 items-center gap-1 text-xs italic w-full",children:[e.jsx("p",{className:"col-span-3 h-full flex items-center p-2 justify-center border-[1px] rounded border-gray-800",children:"Product"}),e.jsx("p",{className:"col-span-3 h-full flex items-center p-2 justify-center border-[1px] border-gray-800 rounded",children:"Qty*Price"}),e.jsx("p",{className:"col-span-3 h-full flex items-center p-2 justify-center border-[1px] border-gray-800 rounded",children:"Total"}),e.jsx("p",{className:"col-span-3 h-full flex items-center p-2 justify-center border-[1px] border-gray-800 rounded",children:"Added to cart/Order placed"})]}),a.length>0&&a.slice().reverse().map(t=>e.jsxs(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"grid grid-cols-12 text-xs gap-2 w-full p-5 border-[1px] border-gray-700 rounded",children:[e.jsx("p",{className:"col-span-3 text-left",children:t.title}),e.jsxs("p",{className:"col-span-3 text-center",children:[t.quantity,"*$",t.price]}),e.jsxs("p",{className:"col-span-3 text-center",children:["$",(t.quantity*t.price).toFixed(2)]}),e.jsx("p",{className:"col-span-3 text-right",children:t.created_at.split("T")[0]}),e.jsx("div",{className:"col-span-12 flex justify-end",children:e.jsx("button",{className:"text-red-400 btn",onClick:()=>x(t.uuid),children:"Remove"})})]},t.uuid)),a.length>1&&e.jsx("p",{onClick:p,className:" text-red-400 w-full text-center btn my-2",children:"Clear history"})]})}export{j as default};
