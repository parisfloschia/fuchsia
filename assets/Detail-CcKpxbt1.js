import{r as i,e as y,u as N,k as b,j as e,m as j,C as m,L as g,l as k,n as f,o as v,A as w,h as C}from"./index-BWR4b1bp.js";function S({onClose:l,item:t,type:n}){const[s,o]=i.useState(1);y(a=>a.cart);const[x,c]=i.useState(!1),r=N(),u=b(),h=async()=>{c(!0),await r(k({...t,quantity:s})),await r(f({...t,quantity:s,orderPlaced:!0})),c(!1),l(),u("/checkout")},d=async()=>{c(!0),await r(f({...t,quantity:s})),c(!1),l()};return e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},className:"fixed bg-black/60 inset-0 flex items-center z-10 justify-center",onClick:l,children:e.jsxs("div",{onClick:a=>a.stopPropagation(),className:"bg-white rounded-lg w-9/12 p-5 flex flex-col items-center gap-2",children:[e.jsx("p",{className:"text-xs opacity-50 uppercase",children:n==="checkout"?"Checkout":"Add to cart"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs opacity-70 mt-4 flex items-center gap-1",children:[e.jsx(m,{}),"10 items/Stock is the max quantity available."]}),e.jsxs("p",{className:"text-xs opacity-70 flex items-center gap-1",children:[e.jsx(m,{className:"invisible"}),"Click outside to close/discard."]})]}),e.jsx("p",{children:"Quantity"}),e.jsxs("div",{className:"flex items-center gap-4 justify-center",children:[e.jsx("span",{onClick:s===1?null:()=>o(a=>a-1),className:"text-2xl ",children:"<"}),e.jsx("p",{className:"btn text-center ",children:s}),e.jsx("span",{onClick:s===t.stock||s===10?null:()=>o(a=>a+1),className:"text-2xl ",children:">"})]}),e.jsxs("div",{className:"text-xs uppercase flex items-center gap-5",children:[e.jsxs("p",{children:["Stock: ",t.stock]}),e.jsxs("p",{children:["Total: $",(t.price*s).toFixed(2)]})]}),e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("button",{onClick:n==="addtocart"?d:h,className:"btn  bg-gradient-to-r from-indigo-200 to-violet-500 text-white font-bold text-white font-bold mb-4 overflow-hidden",children:x?e.jsx(g,{size:"4px",color:"white"}):n==="checkout"?"Checkout":"Add to cart"})})]})})}function q(){const{id:l}=v(),[t,n]=i.useState({}),[s,o]=i.useState(!1),[x,c]=i.useState(!1),[r,u]=i.useState(""),h=d=>{u(d.target.name),c(!0),console.log(d.target.name)};return i.useEffect(()=>{(async()=>{o(!0);try{const p=await(await fetch(`https://dummyjson.com/products/${l}`)).json();console.log(p),n(p),o(!1)}catch(a){alert(a)}})()},[l]),e.jsxs("div",{className:"z-1",children:[e.jsx(w,{children:x&&e.jsx(S,{type:r,item:t,open:x,onClose:()=>c(!1)})}),s?e.jsx(g,{}):Object.keys(t).length>0&&e.jsxs(j.div,{initial:{opacity:0},animate:{opacity:100},className:" w-full flex flex-col items-center",children:[e.jsx("div",{className:"w-11/12 h-80 rounded-lg bg-white ",children:e.jsx(C,{src:t==null?void 0:t.thumbnail})}),e.jsxs("div",{className:" my-2 flex flex-col items-start gap-6 w-11/12",children:[e.jsxs("div",{children:[e.jsx("p",{className:" font-serif italic w-full text-xl",children:t.title}),e.jsx("p",{className:"text-xs uppercase text-indigo-500/40 font-bold",children:t.brand||"No brand"})]}),e.jsx("p",{children:t.description}),e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs("p",{className:"text-xl italic",children:["$",t.price]}),e.jsxs("p",{className:"text-xs uppercase z-0 opacity-80",children:["Stock:",t.stock]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{name:"addtocart",onClick:h,className:"bg-gradient-to-r from-indigo-200 to-violet-500 btn text-gray-700 text-white font-bold",children:"Add To Cart"}),e.jsx("button",{name:"checkout",className:"btn bg-gradient-to-r from-indigo-200 to-violet-500 text-white font-bold",onClick:h,children:"Checkout"})]})]})]})]})}export{q as default};
